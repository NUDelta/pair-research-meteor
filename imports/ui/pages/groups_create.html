<template name="groups_create">
  <div class="container" id="groups_create">
    <div class="row">
      <div class="col s8 offset-s2">
        <h3 class="amber-text text-darken-2">Create a Pair Research Pool</h3>
        <form id="group">
          <h5 class="teal-text">Basics</h5>
          <div class="input-field">
            <label for="name">Group Name</label>
            <input id="name" name="name" type="text" class="validate" required>
          </div>

          <div class="input-field">
            <label for="description">Group Description</label>
            <input id="description" name="description" type="text" class="validate" required>
          </div>

          <p>
            <input type="checkbox" id="publicJoin" name="publicJoin">
            <label for="publicJoin">Allow anyone to find, view, and join group</label>
          </p>
          <p>
            <input type="checkbox" id="allowGuests" name="allowGuests">
            <label for="allowGuests">Allow guests to join pool</label>
          </p>

          <h5 class="teal-text">Roles</h5>
          <p class="info">
            You can give your group members different titles and roles with different administrative
            permissions here. In the future, you will also be able to add or take away preference for
            pairings between two roles in your group.
          </p>
          <ul class="collection roles">
            {{#each role in roles}}
              <li class="collection-item">
                <span class="role-left">
                  {{#if (isEditing @index)}}
                    <i data-index="{{@index}}" class="material-icons">done</i>
                    <input data-index="{{@index}}" name="{{@index}}-role-name" type="text" class="browser" value="{{role.title}}">
                  {{else}}
                    <i data-index="{{@index}}" class="material-icons">edit</i>
                    <span data-index="{{@index}}">{{ role.title }}</span>
                  {{/if}}
                </span>
                <a href="#delete" data-index="{{@index}}" class="secondary-content">
                  <i class="material-icons">close</i>
                </a>
                <span class="role-right">
                  <input type="checkbox" id="{{@index}}-role" data-index="{{@index}}" {{isAdmin @index}}>
                  <label for="{{@index}}-role">Admin?</label>
                </span>
              </li>
            {{/each}}
            <li class="collection-item disabled">
              <span>
                <div class="material-icons">add</div>
                Add
              </span>
            </li>
          </ul>

          <h5 class="teal-text">Members</h5>
          <p class="info">
            Each of these members will be sent an email to join this pair research group. Multiple emails delimited by
            commas will automatically be parsed out and separately added.
          </p>
          <div class="input-field valign-wrapper">
            <label for="member">Add member(s) by email</label>
            <input id="member" type="text" name="member">
            <button id="addMember" type="button" class="waves-effect waves-light btn valign">Add</button>
          </div>
          <ul class="collection member-select">
            <li class="collection-item">
              <div class="disabled">
                {{ currentUser.email }}
              </div>
            </li>
            {{#each member in members}}
              <li class="collection-item">
                <span class="title name">
                  {{member.email}}
                </span>
                <select name="{{@index}}_role" data-index="{{@index}}">
                  {{#each role in roles}}
                    <option value="{{role.title}}" selected="{{$eq member.role role.title}}">{{role.title}}</option>
                  {{/each}}
                </select>
                <a href='#' class="secondary-content" data-index="{{@index}}">
                  <i class="material-icons">close</i>
                </a>
              </li>
            {{/each}}
          </ul>
          <button id="create-group" class="pair-form-button">Create</button>
        </form>
      </div>
    </div>
  </div>
</template>

