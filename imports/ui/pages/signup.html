<template name="signup">
  <div id="signup" class="container">
    <div class="row">
      <div class="col s12 m8 offset-m2">
        <h3 class="header">Join Pair Research</h3>
        {{#if $eq step 1}}
          <div id="step1" class="step">
            <h5 class="caption">
              You'll be able to see the group you're joining or create a new group and invite your team members right after this.
            </h5>
            <form>
              <h5 class="teal-text">About You</h5>
              <div class="input-field">
                <label for="fullName">Full name</label>
                <input id="fullName" name="fullName" type="text" class="validate" required>
              </div>

              <div class="input-field">
                <label for="email" class="{{user.class}}">Email</label>
                <input id="email" name="email" type="email" class="validate" required
                       value="{{user.email}}" {{user.disabled}}>
              </div>

              <div class="input-field">
                <label for="password">Password</label>
                <input id="password" name="password" type="password" class="validate" required>
              </div>

              <div class="input-field">
                <label for="avatar">Link to square image (optional)</label>
                <input id="avatar" name="avatar" type="url" class="validate">
              </div>

              <div class="avatar-input">
                <img src="{{avatar}}">
                <button class="pair-form-button waves-effect waves-light">Sign up</button>
              </div>

            </form>
          </div>
        {{/if}}
        {{#if $eq step 2}}
          <div id="step2" class="step">
            <h5 class="caption">You're going to be joining these groups.</h5>
            <ul class="collection invites">
              {{#each group in groups}}
                <li class="collection-item">
                  <div>
                    {{ group.groupName }}
                    <span class="info">
                      as
                      <select class="browser-default" data-group="{{group.groupId}}">
                        {{#each role in (roles group.groupId)}}
                          <option value="{{role.title}}" selected="{{$eq group.role.title role.title}}">
                            {{role.title}}
                          </option>
                        {{/each}}
                      </select>
                    </span>
                  </div>
                </li>
              {{else}}
                <li class="collection-item">
                  <div class="disabled">
                    <!-- TODO: fix this interaction with create, e.g. return here? -->
                    Nothing here yet. Want to <a href="{{pathFor 'App.groups.create'}}">create your own?</a>
                  </div>
                </li>
              {{/each}}
            </ul>
            <form class="pair-form">
              <!-- TODO: Add back in when we have publicly joinnable groups -->
              <!--<h5 class="teal-text">Search</h5>-->
              <!--<div class="input-field">-->
                <!--<input id="search" type="search" placeholder="Coming soon!" disabled>-->
                <!--<label for="search">-->
                  <!--<i class="material-icons">search</i>-->
                <!--</label>-->
                <!--<i class="material-icons">close</i>-->
              <!--</div>-->
              <button class="pair-form-button waves-effect waves-light" {{$if ($eq groups.length 0) 'disabled' ''}}>
                Continue
              </button>
              <a href="{{pathFor 'App.groups.create'}}">
                <button class="waves-effect waves-light btn">Create New Group</button>
              </a>
              <p class="info">
                If you don't see the group you're expecting to join, ask your group leader to invite you. You'll see
                it above once they do and will be able to continue.
              </p>
            </form>
          </div>
        {{/if}}
      </div>
    </div>
  </div>
</template>

